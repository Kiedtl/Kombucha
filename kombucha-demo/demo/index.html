<!DOCTYPE html>
<html>

<head>
  <title>ISF Example by space-is-the-place</title>
  <meta name="description" content="Interactive shader format on Glitch">
  <link id="favicon" rel="icon" href="https://glitch.com/edit/favicon-app.ico" type="image/x-icon">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    html,
    body {
      margin: 0;
    }
  </style>
</head>

<body>
  <canvas id="isf-canvas"></canvas>
  <script>
    const ISFRenderer = require('interactive-shader-format').Renderer
    const ControlKit = require('controlkit')

    const canvas = document.querySelector('#isf-canvas')
    canvas.width = window.innerWidth
    canvas.height = window.innerHeight

    const gl = canvas.getContext("webgl");
    const renderer = new ISFRenderer(gl);

    const isfFragment = require('./isf-sketch')
    renderer.loadSource(isfFragment);
    renderer.setValue("dotSize", .05)

    const animate = () => {
      requestAnimationFrame(animate)
      renderer.draw(canvas);
    }
    animate()

    ControlKit.setup()
    const controlKitPanel = ControlKit.addPanel()
    const params = {
      dotSize: {
        value: 0.75,
        range: [0.5, 1.0]
      }
    }
    controlKitPanel.addSlider(
      params.dotSize, // Object to update
      'value', 'range', // key for value and range
      { // options
        label: 'morph',
        onChange: function (v) {
          renderer.setValue("morph", params.dotSize.value)
        }
      }
    )
  </script>

</body>

</html>